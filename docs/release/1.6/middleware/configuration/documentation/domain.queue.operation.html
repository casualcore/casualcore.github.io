<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>configuration queue &mdash; casual  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/casual-32x32.png"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="configuration transaction" href="domain.transaction.operation.html" />
    <link rel="prev" title="configuration domain (general)" href="domain.general.operation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            casual
              <img src="../../../_static/casual.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../README.html">summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation/components.html">components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation/user-particles.html">user particles</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">sections</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../documentation/operation.html">operation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../administration/documentation/cli/overview.html">command line interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../administration/documentation/environment.operation.html">environment variables that affect operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="domain.gateway.operation.html">configuration gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="domain.general.operation.html">configuration domain (general)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">configuration queue</a></li>
<li class="toctree-l2"><a class="reference internal" href="domain.transaction.operation.html">configuration transaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="system.operation.html">configuration system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../buffer/documentation/field.operation.html">field operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../common/documentation/log.operation.html">log operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../http/documentation/outbound/configuration.operation.html">http outbound configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../queue/documentation/queue.operation.html">casual-queue</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../queue/documentation/upgrade.operation.html">queue upgrade</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation/development.html">development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation/examples.html">examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">casual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../documentation/operation.html">operation</a></li>
      <li class="breadcrumb-item active">configuration queue</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/middleware/configuration/documentation/domain.queue.operation.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="configuration-queue">
<h1>configuration queue<a class="headerlink" href="#configuration-queue" title="Permalink to this heading">¶</a></h1>
<p>This is the runtime configuration for a casual domain.</p>
<p>The sections can be splitted in arbitrary ways, and aggregated to one configuration model <code class="docutils literal notranslate"><span class="pre">casual</span></code> uses.
Same sections can be defined in different files, hence, give more or less unlimited configuration setup.</p>
<p>Most of the <em>sections</em> has a property <code class="docutils literal notranslate"><span class="pre">note</span></code> for the user to provide descriptions of the documentation.
The examples further down uses this to make it easier to understand the examples by them self. But can of
course be used as a mean to help document actual production configuration.</p>
<section id="domain-queue">
<h2>domain.queue<a class="headerlink" href="#domain-queue" title="Permalink to this heading">¶</a></h2>
<p>Defines the queue configuration</p>
<section id="duration-string">
<h3>Duration : <code class="docutils literal notranslate"><span class="pre">string</span></code><a class="headerlink" href="#duration-string" title="Permalink to this heading">¶</a></h3>
<p>A string representation of a <em>duration</em>. SI units can be used. Example: <code class="docutils literal notranslate"><span class="pre">30ms</span></code>, <code class="docutils literal notranslate"><span class="pre">1h</span></code>, <code class="docutils literal notranslate"><span class="pre">3min</span></code>, <code class="docutils literal notranslate"><span class="pre">40s</span></code>. if no SI unit <code class="docutils literal notranslate"><span class="pre">s</span></code> is used</p>
</section>
<section id="retry-structure">
<h3>Retry <em>(structure)</em><a class="headerlink" href="#retry-structure" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>property</p></th>
<th class="head"><p>description</p></th>
<th class="head"><p>default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[count : <code class="docutils literal notranslate"><span class="pre">integer</span></code>]</p></td>
<td><p>number of rollbacks before move to <em>error queue</em></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>[delay : <code class="docutils literal notranslate"><span class="pre">Duration</span></code>]</p></td>
<td><p>delay before message is available for dequeue after rollback</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0s</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="domain-queue-default">
<h3>domain.queue.default<a class="headerlink" href="#domain-queue-default" title="Permalink to this heading">¶</a></h3>
<p>Default properties that will be used if not defined per <code class="docutils literal notranslate"><span class="pre">queue</span></code></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>property</p></th>
<th class="head"><p>description</p></th>
<th class="head"><p>default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[directory : <code class="docutils literal notranslate"><span class="pre">string</span></code>]</p></td>
<td><p>directory for generated storage files</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">${CASUAL_PERSISTENT_DIRECTORY}/queue</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>[queue.retry : <code class="docutils literal notranslate"><span class="pre">Retry</span></code>]</p></td>
<td><p>retry semantics</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
<section id="domain-queue-groups-list">
<h3>domain.queue.groups <em>(list)</em><a class="headerlink" href="#domain-queue-groups-list" title="Permalink to this heading">¶</a></h3>
<p>Defines groups of queues which share the same storage location. Groups has no other meaning.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>property</p></th>
<th class="head"><p>description</p></th>
<th class="head"><p>default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>alias : <code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>the (unique) alias of the group.</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>[queuebase : <code class="docutils literal notranslate"><span class="pre">string</span></code>]</p></td>
<td><p>the path to the storage file.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">domain.queue.default.directory/&lt;group-name&gt;.qb</span></code></p></td>
</tr>
<tr class="row-even"><td><p>[queues : <code class="docutils literal notranslate"><span class="pre">list</span></code>]</p></td>
<td><p>defines all queues in this group, see below</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<p>Note: if <code class="docutils literal notranslate"><span class="pre">:memory:</span></code> is used as <code class="docutils literal notranslate"><span class="pre">queuebase</span></code>, the storage is non persistent</p>
<section id="domain-queue-groups-queues">
<h4>domain.queue.groups.queues<a class="headerlink" href="#domain-queue-groups-queues" title="Permalink to this heading">¶</a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>property</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name : <code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>the (unique) name of the queue.</p></td>
</tr>
<tr class="row-odd"><td><p>[retry : <code class="docutils literal notranslate"><span class="pre">Retry</span></code>]</p></td>
<td><p>retry semantics</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="domain-queue-forward">
<h3>domain.queue.forward<a class="headerlink" href="#domain-queue-forward" title="Permalink to this heading">¶</a></h3>
<p>Section to configure queue to service forwards and queue to queue forwards.</p>
<section id="domain-queue-forward-default">
<h4>domain.queue.forward.default<a class="headerlink" href="#domain-queue-forward-default" title="Permalink to this heading">¶</a></h4>
<p>Default properties that will be used if not explicitly configured per forward.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>property</p></th>
<th class="head"><p>description</p></th>
<th class="head"><p>default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[service.instances : <code class="docutils literal notranslate"><span class="pre">integer</span></code>]</p></td>
<td><p>number of forward instances</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>[service.reply.delay : <code class="docutils literal notranslate"><span class="pre">Duration</span></code>]</p></td>
<td><p>reply enqueue available delay</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0s</span></code></p></td>
</tr>
<tr class="row-even"><td><p>[queue.instances : <code class="docutils literal notranslate"><span class="pre">integer</span></code>]</p></td>
<td><p>number of forward instances</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>[queue.target.delay : <code class="docutils literal notranslate"><span class="pre">Duration</span></code>]</p></td>
<td><p>enqueue available delay</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0s</span></code></p></td>
</tr>
</tbody>
</table>
<section id="domain-queue-forward-groups-list">
<h5>domain.queue.forward.groups <em>(list)</em><a class="headerlink" href="#domain-queue-forward-groups-list" title="Permalink to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>property</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>alias : <code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>the (unique) alias of the group.</p></td>
</tr>
<tr class="row-odd"><td><p>[services : <code class="docutils literal notranslate"><span class="pre">list</span></code>]</p></td>
<td><p>queue-to-services forwards</p></td>
</tr>
<tr class="row-even"><td><p>[queues : <code class="docutils literal notranslate"><span class="pre">list</span></code>]</p></td>
<td><p>queue-to-queue forwards</p></td>
</tr>
</tbody>
</table>
</section>
<section id="domain-queue-forward-groups-services">
<h5>domain.queue.forward.groups.services<a class="headerlink" href="#domain-queue-forward-groups-services" title="Permalink to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>property</p></th>
<th class="head"><p>description</p></th>
<th class="head"><p>default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>source : <code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>the queue to dequeue from</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>[alias : <code class="docutils literal notranslate"><span class="pre">string</span></code>]</p></td>
<td><p>the (unique) alias of the forward</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;source&gt;</span></code>, on collisions <code class="docutils literal notranslate"><span class="pre">&lt;source&gt;.#</span></code></p></td>
</tr>
<tr class="row-even"><td><p>[instances : <code class="docutils literal notranslate"><span class="pre">integer</span></code>]</p></td>
<td><p>number of multiplexing ‘instances’</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">domain.queue.forward.default.service.instances</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>target.service : <code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>service to call</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>[reply.queue : <code class="docutils literal notranslate"><span class="pre">string</span></code>]</p></td>
<td><p>queue to enqueue reply to</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>[reply.delay : <code class="docutils literal notranslate"><span class="pre">Duration</span></code>]</p></td>
<td><p>reply enqueue available delay</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
<section id="domain-queue-forward-groups-queues-list">
<h5>domain.queue.forward.groups.queues <em>(list)</em><a class="headerlink" href="#domain-queue-forward-groups-queues-list" title="Permalink to this heading">¶</a></h5>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>property</p></th>
<th class="head"><p>description</p></th>
<th class="head"><p>default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>source : <code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>the queue to dequeue from</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>[alias : <code class="docutils literal notranslate"><span class="pre">string</span></code>]</p></td>
<td><p>the (unique) alias of the forward</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;source&gt;</span></code>, on collisions <code class="docutils literal notranslate"><span class="pre">&lt;source&gt;.#</span></code></p></td>
</tr>
<tr class="row-even"><td><p>[instances : <code class="docutils literal notranslate"><span class="pre">integer</span></code>]</p></td>
<td><p>number of multiplexing ‘instances’</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">domain.queue.forward.default.queue.instances</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>target.queue : <code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p>queue to enqueue to</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>[target.delay : <code class="docutils literal notranslate"><span class="pre">Duration</span></code>]</p></td>
<td><p>enqueued available delay</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">domain.queue.forward.default.queue.target.delay</span></code></p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>
<section id="examples">
<h2>examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h2>
<p>Below follows examples in <code class="docutils literal notranslate"><span class="pre">yaml</span></code> and <code class="docutils literal notranslate"><span class="pre">json</span></code> <em>(casual can also handle <code class="docutils literal notranslate"><span class="pre">ini</span></code> and <code class="docutils literal notranslate"><span class="pre">xml</span></code>)</em></p>
<section id="yaml">
<h3>yaml<a class="headerlink" href="#yaml" title="Permalink to this heading">¶</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">domain</span><span class="p">:</span>
<span class="w">  </span><span class="nt">queue</span><span class="p">:</span>
<span class="w">    </span><span class="nt">note</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;retry.count</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">rollbacks</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">greater,</span><span class="nv"> </span><span class="s">message</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">moved</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">error-queue</span><span class="nv">  </span><span class="s">retry.delay</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">amount</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">time</span><span class="nv"> </span><span class="s">before</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">message</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">available</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">consumption,</span><span class="nv"> </span><span class="s">after</span><span class="nv"> </span><span class="s">rollback\n&quot;</span>
<span class="w">    </span><span class="nt">default</span><span class="p">:</span>
<span class="w">      </span><span class="nt">queue</span><span class="p">:</span>
<span class="w">        </span><span class="nt">retry</span><span class="p">:</span>
<span class="w">          </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">          </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20s&quot;</span>
<span class="w">      </span><span class="nt">directory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${CASUAL_DOMAIN_HOME}/queue/groups&quot;</span>
<span class="w">    </span><span class="nt">groups</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;A&quot;</span>
<span class="w">        </span><span class="nt">note</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;will</span><span class="nv"> </span><span class="s">get</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">queuebase:</span><span class="nv"> </span><span class="s">${CASUAL_DOMAIN_HOME}/queue/groups/A.qb&quot;</span>
<span class="w">        </span><span class="nt">queues</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a1&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a2&quot;</span>
<span class="w">            </span><span class="nt">retry</span><span class="p">:</span>
<span class="w">              </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">              </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100ms&quot;</span>
<span class="w">            </span><span class="nt">note</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;after</span><span class="nv"> </span><span class="s">10</span><span class="nv"> </span><span class="s">rollbacked</span><span class="nv"> </span><span class="s">dequeues,</span><span class="nv"> </span><span class="s">message</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">moved</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">a2.error&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a3&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a4&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;B&quot;</span>
<span class="w">        </span><span class="nt">queuebase</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/some/fast/disk/queue/groupB.qb&quot;</span>
<span class="w">        </span><span class="nt">queues</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b1&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b2&quot;</span>
<span class="w">            </span><span class="nt">retry</span><span class="p">:</span>
<span class="w">              </span><span class="nt">count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">            </span><span class="nt">note</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;after</span><span class="nv"> </span><span class="s">20</span><span class="nv"> </span><span class="s">rollbacked</span><span class="nv"> </span><span class="s">dequeues,</span><span class="nv"> </span><span class="s">message</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">moved</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">b2.error.</span><span class="nv"> </span><span class="s">retry.delay</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">&#39;inherited&#39;</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">default,</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">any&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;C&quot;</span>
<span class="w">        </span><span class="nt">queuebase</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;:memory:&quot;</span>
<span class="w">        </span><span class="nt">note</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;group</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">in-memory</span><span class="nv"> </span><span class="s">queue,</span><span class="nv"> </span><span class="s">hence</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">persistence&quot;</span>
<span class="w">        </span><span class="nt">queues</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;c1&quot;</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;c2&quot;</span>
<span class="w">    </span><span class="nt">forward</span><span class="p">:</span>
<span class="w">      </span><span class="nt">default</span><span class="p">:</span>
<span class="w">        </span><span class="nt">service</span><span class="p">:</span>
<span class="w">          </span><span class="nt">instances</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">          </span><span class="nt">reply</span><span class="p">:</span>
<span class="w">            </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2s&quot;</span>
<span class="w">        </span><span class="nt">queue</span><span class="p">:</span>
<span class="w">          </span><span class="nt">instances</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">          </span><span class="nt">target</span><span class="p">:</span>
<span class="w">            </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;500ms&quot;</span>
<span class="w">      </span><span class="nt">groups</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;forward-group-1&quot;</span>
<span class="w">          </span><span class="nt">services</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span>
<span class="w">              </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b1&quot;</span>
<span class="w">              </span><span class="nt">instances</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">              </span><span class="nt">target</span><span class="p">:</span>
<span class="w">                </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;casual/example/echo&quot;</span>
<span class="w">              </span><span class="nt">reply</span><span class="p">:</span>
<span class="w">                </span><span class="nt">queue</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a3&quot;</span>
<span class="w">                </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10ms&quot;</span>
<span class="w">          </span><span class="nt">queues</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;c1&quot;</span>
<span class="w">              </span><span class="nt">note</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gets</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">alias</span><span class="nv"> </span><span class="s">&#39;c1&#39;&quot;</span>
<span class="w">              </span><span class="nt">target</span><span class="p">:</span>
<span class="w">                </span><span class="nt">queue</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a4&quot;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;forward-group-2&quot;</span>
<span class="w">          </span><span class="nt">services</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">alias</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bar&quot;</span>
<span class="w">              </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b2&quot;</span>
<span class="w">              </span><span class="nt">target</span><span class="p">:</span>
<span class="w">                </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;casual/example/echo&quot;</span>
<span class="nn">...</span>
</pre></div>
</div>
</section>
<section id="json">
<h3>json<a class="headerlink" href="#json" title="Permalink to this heading">¶</a></h3>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;domain&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;queue&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;note&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;retry.count - if number of rollbacks is greater, message is moved to error-queue  retry.delay - the amount of time before the message is available for consumption, after rollback\n&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;queue&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;retry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;delay&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;20s&quot;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;directory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;${CASUAL_DOMAIN_HOME}/queue/groups&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;groups&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;alias&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;note&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;will get default queuebase: ${CASUAL_DOMAIN_HOME}/queue/groups/A.qb&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;queues&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a1&quot;</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a2&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;retry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">                                </span><span class="nt">&quot;delay&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;100ms&quot;</span>
<span class="w">                            </span><span class="p">},</span>
<span class="w">                            </span><span class="nt">&quot;note&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;after 10 rollbacked dequeues, message is moved to a2.error&quot;</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a3&quot;</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a4&quot;</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;alias&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;B&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;queuebase&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/some/fast/disk/queue/groupB.qb&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;queues&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b1&quot;</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b2&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;retry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span>
<span class="w">                            </span><span class="p">},</span>
<span class="w">                            </span><span class="nt">&quot;note&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;after 20 rollbacked dequeues, message is moved to b2.error. retry.delay is &#39;inherited&#39; from default, if any&quot;</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;alias&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;queuebase&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;:memory:&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;note&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;group is an in-memory queue, hence no persistence&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;queues&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c1&quot;</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c2&quot;</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;forward&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;instances&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;reply&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;delay&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2s&quot;</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nt">&quot;queue&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;instances&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;delay&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;500ms&quot;</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="nt">&quot;groups&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;alias&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;forward-group-1&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;services&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                            </span><span class="p">{</span>
<span class="w">                                </span><span class="nt">&quot;alias&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;foo&quot;</span><span class="p">,</span>
<span class="w">                                </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b1&quot;</span><span class="p">,</span>
<span class="w">                                </span><span class="nt">&quot;instances&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">                                </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                    </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;casual/example/echo&quot;</span>
<span class="w">                                </span><span class="p">},</span>
<span class="w">                                </span><span class="nt">&quot;reply&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                    </span><span class="nt">&quot;queue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a3&quot;</span><span class="p">,</span>
<span class="w">                                    </span><span class="nt">&quot;delay&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;10ms&quot;</span>
<span class="w">                                </span><span class="p">}</span>
<span class="w">                            </span><span class="p">}</span>
<span class="w">                        </span><span class="p">],</span>
<span class="w">                        </span><span class="nt">&quot;queues&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                            </span><span class="p">{</span>
<span class="w">                                </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;c1&quot;</span><span class="p">,</span>
<span class="w">                                </span><span class="nt">&quot;note&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gets the alias &#39;c1&#39;&quot;</span><span class="p">,</span>
<span class="w">                                </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                    </span><span class="nt">&quot;queue&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a4&quot;</span>
<span class="w">                                </span><span class="p">}</span>
<span class="w">                            </span><span class="p">}</span>
<span class="w">                        </span><span class="p">]</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;alias&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;forward-group-2&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;services&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                            </span><span class="p">{</span>
<span class="w">                                </span><span class="nt">&quot;alias&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bar&quot;</span><span class="p">,</span>
<span class="w">                                </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b2&quot;</span><span class="p">,</span>
<span class="w">                                </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                                    </span><span class="nt">&quot;service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;casual/example/echo&quot;</span>
<span class="w">                                </span><span class="p">}</span>
<span class="w">                            </span><span class="p">}</span>
<span class="w">                        </span><span class="p">]</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="domain.general.operation.html" class="btn btn-neutral float-left" title="configuration domain (general)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="domain.transaction.operation.html" class="btn btn-neutral float-right" title="configuration transaction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, casual.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: release/1.6
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Branches</dt>
      <dd><a href="domain.queue.operation.html">release/1.6</a></dd>
      <dd><a href="../../../../1.7/middleware/configuration/documentation/domain.queue.operation.html">release/1.7</a></dd>
    </dl>
  </div>
</div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>